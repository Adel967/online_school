<%- include('../../includes/head.ejs') %>

  </head>
  <body data-bs-spy="scroll" data-bs-target="#navbar">
    <!-- Nav Bar -->

    <%- include('../../includes/admin_navbar.ejs') %>

    <% if (errorMessage) { %>
        <div id="flash-message" class="alert alert-danger toast-message">
          <%= errorMessage %>
        </div>
        <% } %>

    <div class="container my-5">
        <div class="card p-4 shadow-sm">
          <h3 class="mb-4 text-center"> <%= edit ? 'تعديل' : 'إنشاء' %> كوبون </h3>
          <form action="<%= edit ? '/admin/coupon/edit' : '/admin/coupon/create' %>" method="POST" class="p-4 border rounded bg-light">
            <% if (edit) { %>
                <input type="hidden" value="<%= oldInput.couponId %>" name="couponId">
            <% } %>
            <div class="mb-3">
              <label for="code" class="form-label">كود الكوبون</label>
              <input type="text" name="code" id="code" value="<%= oldInput.code %>" class="form-control <%= errors.find(e => e.path === 'code') ? 'invalid' : '' %>" required>
            </div>
            <div class="mb-3">
              <label for="salePercentage" class="form-label">نسبة الخصم (%)</label>
              <input type="number" name="salePercentage" id="salePercentage"  value="<%= oldInput.salePercentage %>" class="form-control <%= errors.find(e => e.path === 'salePercentage') ? 'invalid' : '' %>" required>
            </div>
            <div class="mb-3">
              <label for="maxStudents" class="form-label">أقصى عدد للطلاب</label>
              <input type="number" name="maxStudents" id="maxStudents" value="<%= oldInput.maxStudents %>" class="form-control <%= errors.find(e => e.path === 'maxStudents') ? 'invalid' : '' %>" required>
            </div>
            <div class="mb-3">
              <label for="lastDate" class="form-label">آخر تاريخ للاستخدام</label>
              <input type="date" name="lastDate" id="lastDate" value="<%= oldInput.lastDate %>" class="form-control <%= errors.find(e => e.path === 'lastDate') ? 'invalid' : '' %>" required>
            </div>
            <button type="submit" class="btn btn-primary"><%= edit ? 'تعديل' : 'إنشاء' %> الكوبون</button>
          </form>
          
        </div>
      </div>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-k6d4wzSIapyDyv1kpU366/PK5hCdSbCRGRCMv+eplOQJWyd1fbcAu9OCUj5zNLiq"
      crossorigin="anonymous"
    ></script>
    <script src="/js/flash-message.js"></script>

  </body>
</html>
