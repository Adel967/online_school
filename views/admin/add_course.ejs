<%- include('../includes/head.ejs') %>

  </head>
  <body data-bs-spy="scroll" data-bs-target="#navbar">
    <!-- Nav Bar -->

    <%- include('../includes/admin_navbar.ejs') %>

    <% if (errorMessage) { %>
    <div id="flash-message" class="alert alert-danger toast-message">
      <%= errorMessage %>
    </div>
    <% } %>

    <div class="container my-5">
      <div class="card p-4 shadow-sm">
        <h3 class="mb-4 text-center"> <%= edit ? 'تعديل' : 'إنشاء' %> دورة جديدة</h3>
        <form action="<%= edit ? '/admin/course/edit' : '/admin/add_course' %> " method="POST">
          <% if (edit) { %>
            <input type="hidden" value="<%= courseId %>" name="courseId">
        <% } %>
          <!-- Course Title -->
          <div class="mb-3">
            <label class="form-label">عنوان الدورة</label>
            <input
              type="text"
              name="title"
              class="form-control <%= errors.find(e => e.path === 'title') ? 'invalid' : '' %>"
              value="<%= oldInput.title %>"
              placeholder="أدخل عنوان الدورة"
            />
          </div>

          <!-- Course Description -->
          <div class="mb-3">
            <label class="form-label">وصف الدورة</label>
            <textarea
              name="description"
              class="form-control <%= errors.find(e => e.path === 'description') ? 'invalid' : '' %>"
              rows="4"
              placeholder="أدخل وصف الدورة"
            ><%= oldInput.description %></textarea>
          </div>

          <!-- Course Image URL -->
          <div class="mb-3">
            <label class="form-label">رابط صورة الدورة</label>
            <input
              type="text"
              name="imageUrl"
              value="<%= oldInput.imageUrl %>"

              class="form-control <%= errors.find(e => e.path === 'imageUrl') ? 'invalid' : '' %>"
              placeholder="أدخل رابط الصورة"
            />
          </div>

          <div class="row">
            <!-- Session Numbers -->
            <div class="mb-3 col-md-4">
              <label class="form-label">عدد الجلسات</label>
              <input
                type="number"
                name="sessionNumber"
                value="<%= oldInput.sessionNumber %>"
                class="form-control <%= errors.find(e => e.path === 'sessionNumber') ? 'invalid' : '' %>"
                placeholder="مثال: 20"
              />
            </div>

            <!-- Weeks Number -->
            <div class="mb-3 col-md-4">
              <label class="form-label">عدد الأسابيع</label>
              <input
                type="number"
                name="weeksNumber"
                value="<%= oldInput.weeksNumber %>"
                class="form-control <%= errors.find(e => e.path === 'weeksNumber') ? 'invalid' : '' %>"
                placeholder="مثال: 5"
              />
            </div>

            <!-- Students per Group -->
            <div class="mb-3 col-md-4">
              <label class="form-label">عدد الطلاب في كل مجموعة</label>
              <input
                type="number"
                name="studentsPerGroup"
                value="<%= oldInput.studentsPerGroup %>"
                class="form-control <%= errors.find(e => e.path === 'studentsPerGroup') ? 'invalid' : '' %>"
                placeholder="مثال: 4"
              />
            </div>
          </div>

          <!-- Student Age Range -->
          <div class="mb-3">
            <label class="form-label">الفئة العمرية المستهدفة</label>
            <input
              type="text"
              name="studentAgeRange"
              value="<%= oldInput.studentAgeRange %>"
              class="form-control <%= errors.find(e => e.path === 'studentAgeRange') ? 'invalid' : '' %>"
              placeholder="مثال: من 12 إلى 18 سنة"
            />
          </div>

          <div class="row">
            <!-- Course Price -->
            <div class="mb-3">
              <label class="form-label">سعر الدورة حسب الدولة</label>
              <div class="row">
                <div class="col-md-4">
                  <label>سعر بالدولار (USD)</label>
                  <input type="number" class="form-control" name="priceUSD" value="<%= oldInput.priceUSD %>" step="0.01" required />
                </div>
                <div class="col-md-4">
                  <label>سعر بالجنيه المصري (EGP)</label>
                  <input type="number" class="form-control" name="priceEGP" value="<%= oldInput.priceEGP %>" step="0.01" required />
                </div>
                <div class="col-md-4">
                  <label>سعر بالليرة السورية (SYR)</label>
                  <input type="number" class="form-control" name="priceSYR" value="<%= oldInput.priceSYR %>" step="0.01" required />
                </div>
              </div>
            </div>

            <!-- Course Sale -->
            <div class="mb-3 col-md-6">
              <label class="form-label">سعر الخصم (اختياري)</label>
              <input
                type="number"
                name="courseSale"
                value="<%= oldInput.courseSale %>"
                class="form-control <%= errors.find(e => e.path === 'courseSale') ? 'invalid' : '' %>"
                placeholder="مثال: 250"
              />
            </div>
          </div>

          <div class="d-grid">
            <button type="submit" class="btn btn-primary">     <%= edit ? 'تعديل' : 'إنشاء' %></button>
          </div>
        </form>
      </div>
    </div>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-k6d4wzSIapyDyv1kpU366/PK5hCdSbCRGRCMv+eplOQJWyd1fbcAu9OCUj5zNLiq"
      crossorigin="anonymous"
    ></script>
    <script src="/js/flash-message.js"></script>

  </body>
</html>
