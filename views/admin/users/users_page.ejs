<%- include('../../includes/head.ejs') %>

  </head>
  <body data-bs-spy="scroll" data-bs-target="#navbar">
    <!-- Nav Bar -->

    <%- include('../../includes/admin_navbar.ejs') %>


    <!--Courses-->
    <section id="courses" class="section-padding">
      <div class="container">
        <!-- <div class="row">
          <div class="col-12 section-title">
            <h1 class="display-5 fw-semibold">مساراتنا التعليمية</h1>
          </div>
        </div> -->
        <div
          class="row d-flex flex-row gx-sm-4 gy-2 align-items-stretch justify-content-center text-center"
        >
          <% if(users && users.length > 0) { %>
            <form method="get" action="/admin/users" class="mb-4">
                <div class="input-group">
                  <input type="text" name="search" value="<%= search %>" class="form-control" placeholder="ابحث بالبريد أو رقم الهاتف">
                  <button class="btn btn-primary">بحث</button>
                </div>
              </form>
              
              <div class="row">
                <% users.forEach(user => { %>
                  <div class="col-md-4">
                    <div class="card mb-3">
                      <div class="card-body">
                        <h5 class="card-title"><%= user.firstName %> <%= user.lastName %></h5>
                        <p class="card-text">📧 <%= user.email %></p>
                        <p class="card-text">📱 <%= user.phoneNumber %></p>
                        <a href="/admin/users/<%= user.id %>" class="btn btn-outline-secondary btn-sm">تعديل</a>
                      </div>
                    </div>
                  </div>
                <% }); %>
              </div>
              
              <!-- Pagination -->
              <nav aria-label="Page navigation">
                <ul class="pagination justify-content-center">
                  <% if (hasPreviousPage) { %>
                    <li class="page-item"><a class="page-link" href="?search=<%= search %>&page=<%= previousPage %>">السابق</a></li>
                  <% } %>
                  <% for (let i = 1; i <= lastPage; i++) { %>
                    <li class="page-item <%= i === currentPage ? 'active' : '' %>"><a class="page-link" href="?search=<%= search %>&page=<%= i %>"><%= i %></a></li>
                  <% } %>
                  <% if (hasNextPage) { %>
                    <li class="page-item"><a class="page-link" href="?search=<%= search %>&page=<%= nextPage %>">التالي</a></li>
                  <% } %>
                </ul>
              </nav>
              
              
            
            <% } else {%>
          <h2>لا يوجد مستخدمين</h2>
          <% }%>
        </div>
      </div>
    </section>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-k6d4wzSIapyDyv1kpU366/PK5hCdSbCRGRCMv+eplOQJWyd1fbcAu9OCUj5zNLiq"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
