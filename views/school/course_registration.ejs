<%- include('../includes/head.ejs') %>
<style>
  .card {
    border: none;
    border-radius: 15px;
    overflow: hidden;
  }
  .card-header {
    background-color: #33d9b2;
    color: white;
    padding: 1.5rem;
    text-align: center;
  }
  .form-label {
    font-weight: bold;
  }
  .form-control {
    border-radius: 10px;
    padding: 0.6rem;
  }
  .form-control.invalid {
    border-color: red;
  }
  .btn-primary {
    background-color: #33d9b2;
    border: none;
    border-radius: 10px;
    font-weight: bold;
    padding: 0.7rem;
  }
  .btn-primary:hover {
    background-color: #28b49a;
  }
  .highlight {
    background-color: #FFEB66;
    padding: 0.5rem;
    border-radius: 8px;
  }
</style>
</head>

<body data-bs-spy="scroll" data-bs-target="#navbar">
  <%- include('../includes/school_navbar.ejs') %>

  <% if (errorMessage) { %>
    <div id="flash-message" class="alert alert-danger toast-message">
      <%= errorMessage %>
    </div>
  <% } %>

  <div class="container my-5">
    <div class="card shadow-lg">
      <div class="card-header">
        <h3 class="mb-0"><%= __('course.register_title') %></h3>
      </div>
      <div class="card-body bg-light">
        <form action="/course/register" method="POST" class="mt-3">
          <input type="hidden" name="courseId" value="<%= course.id %>" />

          <div class="mb-3">
            <label class="form-label"><%= __('course.student_first_name') %></label>
            <input 
              type="text" 
              class="form-control <%= errors.find(e => e.path === 'studentFirstName') ? 'invalid' : '' %>" 
              name="studentFirstName" 
              placeholder="<%= __('course.placeholder_first_name') %>"
              value="<%= oldInput.studentFirstName %>" 
              required
            >
          </div>

          <div class="mb-3">
            <label class="form-label"><%= __('course.student_last_name') %></label>
            <input 
              type="text" 
              class="form-control <%= errors.find(e => e.path === 'studentLastName') ? 'invalid' : '' %>" 
              name="studentLastName" 
              placeholder="<%= __('course.placeholder_last_name') %>"
              value="<%= oldInput.studentLastName %>" 
              required
            >
          </div>

          <div class="mb-3">
            <label class="form-label"><%= __('course.student_birthdate') %></label>
            <input 
              type="date" 
              class="form-control <%= errors.find(e => e.path === 'studentBirthDate') ? 'invalid' : '' %>" 
              name="studentBirthDate" 
              value="<%= oldInput.studentBirthDate %>" 
              required
            >
          </div>

          <div class="mb-3">
            <label class="form-label"><%= __('course.phone_number') %></label>
            <input 
              type="text" 
              style="direction: ltr" 
              class="form-control <%= errors.find(e => e.path === 'phoneNumber') ? 'invalid' : '' %>" 
              name="phoneNumber" 
              placeholder="<%= __('course.placeholder_phone') %>"
              value="<%= oldInput.phoneNumber %>" 
              required
            >
          </div>

          <div class="mb-3">
            <label class="form-label"><%= __('course.coupon_optional') %></label>
            <input 
              type="text" 
              class="form-control <%= errors.find(e => e.path === 'couponUsed') ? 'invalid' : '' %>" 
              name="couponUsed" 
              placeholder="<%= __('course.placeholder_coupon') %>"
              value="<%= oldInput.couponUsed %>"
            >
          </div>

          <div class="mb-3">
            <label class="form-label"><%= __('course.notes_optional') %></label>
            <textarea 
              class="form-control <%= errors.find(e => e.path === 'notes') ? 'invalid' : '' %>" 
              name="notes" 
              rows="3" 
              placeholder="<%= __('course.placeholder_notes') %>"
            ><%= oldInput.notes %></textarea>
          </div>

          <button type="submit" class="btn btn-primary w-100"><%= __('course.submit_button') %></button>
        </form>
      </div>
    </div>
  </div>

  <%- include('../includes/footer.ejs') %>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js"></script>
  <script src="/js/flash-message.js"></script>
</body>
</html>
